{"version":3,"sources":["../../../src/builders/xviz-pose-builder.js"],"names":["XVIZPoseBuilder","props","category","CATEGORY","pose","_poses","longitude","latitude","altitude","_mapOrigin","x","y","z","_position","roll","pitch","yaw","_orientation","timestamp","_timestamp","data","mapOrigin","position","orientation","_streamId","_flush","poses","XVIZBaseBuilder"],"mappings":";;;;;;;AAcA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,e;;;;;AACnB,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,2GACKA,KADL;AAEEC,MAAAA,QAAQ,EAAEC,mBAASC;AAFrB;AAKA,UAAKC,MAAL,GAAc,IAAd;AANiB;AAOlB;;;;8BAESC,S,EAAWC,Q,EAAUC,Q,EAAU;AACvC,WAAKC,UAAL,GAAkB;AAACH,QAAAA,SAAS,EAATA,SAAD;AAAYC,QAAAA,QAAQ,EAARA,QAAZ;AAAsBC,QAAAA,QAAQ,EAARA;AAAtB,OAAlB;AACA,aAAO,IAAP;AACD;;;6BAEQE,C,EAAGC,C,EAAGC,C,EAAG;AAChB,WAAKC,SAAL,GAAiB,CAACH,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAjB;AACA,aAAO,IAAP;AACD;;;gCAEWE,I,EAAMC,K,EAAOC,G,EAAK;AAC5B,WAAKC,YAAL,GAAoB,CAACH,IAAD,EAAOC,KAAP,EAAcC,GAAd,CAApB;AACA,aAAO,IAAP;AACD;;;8BAESE,U,EAAW;AACnB,WAAKC,UAAL,GAAkBD,UAAlB;AACA,aAAO,IAAP;AACD;;;6BAEQ;AACP,UAAI,CAAC,KAAKb,MAAV,EAAkB;AAChB,aAAKA,MAAL,GAAc,EAAd;AACD;;AAED,UAAMe,IAAI,GAAG,EAAb;;AACA,UAAI,KAAKD,UAAT,EAAqB;AACnBC,QAAAA,IAAI,CAACF,SAAL,GAAiB,KAAKC,UAAtB;AACD;;AAED,UAAI,KAAKV,UAAT,EAAqB;AACnBW,QAAAA,IAAI,CAACC,SAAL,GAAiB,KAAKZ,UAAtB;AACD;;AAED,UAAI,KAAKI,SAAT,EAAoB;AAClBO,QAAAA,IAAI,CAACE,QAAL,GAAgB,KAAKT,SAArB;AACD;;AAED,UAAI,KAAKI,YAAT,EAAuB;AACrBG,QAAAA,IAAI,CAACG,WAAL,GAAmB,KAAKN,YAAxB;AACD;;AAED,WAAKZ,MAAL,CAAY,KAAKmB,SAAjB,IAA8BJ,IAA9B;AACD;;;4BAEO;AACN;;AAEA,WAAKD,UAAL,GAAkB,IAAlB;AACA,WAAKV,UAAL,GAAkB,IAAlB;AACA,WAAKI,SAAL,GAAiB,IAAjB;AACA,WAAKI,YAAL,GAAoB,IAApB;AACD;;;8BAES;AACR,UAAI,KAAKO,SAAT,EAAoB;AAClB,aAAKC,MAAL;AACD;;AAED,aAAO;AACLC,QAAAA,KAAK,EAAE,KAAKrB;AADP,OAAP;AAGD;;;;EAxE0CsB,wB","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport XVIZBaseBuilder from './xviz-base-builder';\nimport {CATEGORY} from './constant';\n\nexport default class XVIZPoseBuilder extends XVIZBaseBuilder {\n  constructor(props) {\n    super({\n      ...props,\n      category: CATEGORY.pose\n    });\n\n    this._poses = null;\n  }\n\n  mapOrigin(longitude, latitude, altitude) {\n    this._mapOrigin = {longitude, latitude, altitude};\n    return this;\n  }\n\n  position(x, y, z) {\n    this._position = [x, y, z];\n    return this;\n  }\n\n  orientation(roll, pitch, yaw) {\n    this._orientation = [roll, pitch, yaw];\n    return this;\n  }\n\n  timestamp(timestamp) {\n    this._timestamp = timestamp;\n    return this;\n  }\n\n  _flush() {\n    if (!this._poses) {\n      this._poses = {};\n    }\n\n    const data = {};\n    if (this._timestamp) {\n      data.timestamp = this._timestamp;\n    }\n\n    if (this._mapOrigin) {\n      data.mapOrigin = this._mapOrigin;\n    }\n\n    if (this._position) {\n      data.position = this._position;\n    }\n\n    if (this._orientation) {\n      data.orientation = this._orientation;\n    }\n\n    this._poses[this._streamId] = data;\n  }\n\n  reset() {\n    super.reset();\n\n    this._timestamp = null;\n    this._mapOrigin = null;\n    this._position = null;\n    this._orientation = null;\n  }\n\n  getData() {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    return {\n      poses: this._poses\n    };\n  }\n}\n"],"file":"xviz-pose-builder.js"}