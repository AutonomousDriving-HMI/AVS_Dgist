"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadFile = loadFile;
exports.loadFileSync = loadFileSync;

var _readFile = require("../read-file/read-file");

var _parseFile = require("../parse-file/parse-file");

var _autoDetectLoader = require("../parse-file/auto-detect-loader");

function loadFile(url, loaders, options) {
  var loader = Array.isArray(loaders) ? (0, _autoDetectLoader.autoDetectLoader)(url, null, loaders) : loaders; // Some loaders can not separate reading and parsing of data (e.g ImageLoader)

  if (loader.loadAndParse) {
    return loader.loadAndParse(url, options);
  }

  return (0, _readFile.readFile)(url, options).then(function (text) {
    return (0, _parseFile.parseFile)(text, url, loaders, options);
  });
}

function loadFileSync(url, loaders, options) {
  var data = (0, _readFile.readFileSync)(url, options);
  var result = (0, _parseFile.parseFileSync)(data, loaders, options, url); // Separate return to facilitate breakpoint setting

  return result;
}
//# sourceMappingURL=load-file.js.map