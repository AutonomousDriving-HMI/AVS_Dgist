{"version":3,"sources":["../../../../src/builders/declarative-ui/xviz-ui-builder.js"],"names":["XVIZPanelBuilder","XVIZContainerBuilder","XVIZMetricBuilder","XVIZPlotBuilder","XVIZSelectBuilder","XVIZTableBuilder","XVIZTreeTableBuilder","XVIZVideoBuilder","snakeToCamel","UI_TYPES","defaultValidateWarn","console","warn","defaultValidateError","error","UI_BUILDER_MAP","PANEL","CONTAINER","METRIC","PLOT","SELECT","TABLE","TREETABLE","VIDEO","XVIZUIBuilder","constructor","options","_validateWarn","validateWarn","_validateError","validateError","_children","Object","values","map","type","camelType","props","_createUIBuilder","getUI","reduce","ui","child","childConfig","name","push","root"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AACA;AACA,OAAOA,gBAAP,MAA6B,sBAA7B;AAEA,OAAOC,oBAAP,MAAiC,0BAAjC;AAEA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,OAAOC,gBAAP,MAA6B,sBAA7B;AACA,OAAOC,oBAAP,MAAiC,2BAAjC;AACA,OAAOC,gBAAP,MAA6B,sBAA7B;AAEA,SAAQC,YAAR,QAA2B,SAA3B;AACA,SAAQC,QAAR,QAAuB,aAAvB;AAEA,MAAMC,mBAAmB,GAAGC,OAAO,CAACC,IAApC;AACA,MAAMC,oBAAoB,GAAGF,OAAO,CAACG,KAArC;AAEA,MAAMC,cAAc,GAAG;AACrB,GAACN,QAAQ,CAACO,KAAV,GAAkBhB,gBADG;AAGrB,GAACS,QAAQ,CAACQ,SAAV,GAAsBhB,oBAHD;AAKrB,GAACQ,QAAQ,CAACS,MAAV,GAAmBhB,iBALE;AAMrB,GAACO,QAAQ,CAACU,IAAV,GAAiBhB,eANI;AAOrB,GAACM,QAAQ,CAACW,MAAV,GAAmBhB,iBAPE;AAQrB,GAACK,QAAQ,CAACY,KAAV,GAAkBhB,gBARG;AASrB,GAACI,QAAQ,CAACa,SAAV,GAAsBhB,oBATD;AAUrB,GAACG,QAAQ,CAACc,KAAV,GAAkBhB;AAVG,CAAvB;AAaA,eAAe,MAAMiB,aAAN,CAAoB;AACjCC,EAAAA,WAAW,GAAe;AAAA,QAAdC,OAAc,uEAAJ,EAAI;AACxB,SAAKC,aAAL,GAAqBD,OAAO,CAACE,YAAR,IAAwBlB,mBAA7C;AACA,SAAKmB,cAAL,GAAsBH,OAAO,CAACI,aAAR,IAAyBjB,oBAA/C;AAEA,SAAKkB,SAAL,GAAiB,EAAjB;AAEAC,IAAAA,MAAM,CAACC,MAAP,CAAcxB,QAAd,EAAwByB,GAAxB,CAA4BC,IAAI,IAAI;AAClC;AACA;AACA;AACA,YAAMC,SAAS,GAAG5B,YAAY,CAAC2B,IAAD,CAA9B;;AACA,WAAKC,SAAL,IAAkBC,KAAK,IAAI;AACzB,eAAO,KAAKC,gBAAL,CAAsBH,IAAtB,EAA4BE,KAA5B,CAAP;AACD,OAFD;AAGD,KARD;AASD;;AAEDE,EAAAA,KAAK,GAAG;AACN,WAAO,KAAKR,SAAL,CAAeS,MAAf,CAAsB,CAACC,EAAD,EAAKC,KAAL,KAAe;AAC1C,YAAMC,WAAW,GAAGD,KAAK,CAACH,KAAN,EAApB;AACAE,MAAAA,EAAE,CAACE,WAAW,CAACC,IAAb,CAAF,GAAuBD,WAAvB;AACA,aAAOF,EAAP;AACD,KAJM,EAIJ,EAJI,CAAP;AAKD;;AAEDC,EAAAA,KAAK,CAACA,KAAD,EAAQ;AACX,QAAI,EAAEA,KAAK,YAAY1C,gBAAnB,CAAJ,EAA0C;AACxC,WAAK6B,cAAL,CAAoB,wCAApB;AACD;;AACD,SAAKE,SAAL,CAAec,IAAf,CAAoBH,KAApB;;AACA,WAAOA,KAAP;AACD;;AAEDJ,EAAAA,gBAAgB,CAACH,IAAD,EAAOE,KAAP,EAAc;AAC5B,WAAO,IAAItB,cAAc,CAACoB,IAAD,CAAlB,mBACFE,KADE;AAELT,MAAAA,YAAY,EAAE,KAAKD,aAFd;AAGLG,MAAAA,aAAa,EAAE,KAAKD,cAHf;AAILiB,MAAAA,IAAI,EAAE;AAJD,OAAP;AAMD;;AAzCgC","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* global console */\n/* eslint-disable no-console */\nimport XVIZPanelBuilder from './xviz-panel-builder';\n\nimport XVIZContainerBuilder from './xviz-container-builder';\n\nimport XVIZMetricBuilder from './xviz-metric-builder';\nimport XVIZPlotBuilder from './xviz-plot-builder';\nimport XVIZSelectBuilder from './xviz-select-builder';\nimport XVIZTableBuilder from './xviz-table-builder';\nimport XVIZTreeTableBuilder from './xviz-tree-table-builder';\nimport XVIZVideoBuilder from './xviz-video-builder';\n\nimport {snakeToCamel} from './utils';\nimport {UI_TYPES} from './constants';\n\nconst defaultValidateWarn = console.warn;\nconst defaultValidateError = console.error;\n\nconst UI_BUILDER_MAP = {\n  [UI_TYPES.PANEL]: XVIZPanelBuilder,\n\n  [UI_TYPES.CONTAINER]: XVIZContainerBuilder,\n\n  [UI_TYPES.METRIC]: XVIZMetricBuilder,\n  [UI_TYPES.PLOT]: XVIZPlotBuilder,\n  [UI_TYPES.SELECT]: XVIZSelectBuilder,\n  [UI_TYPES.TABLE]: XVIZTableBuilder,\n  [UI_TYPES.TREETABLE]: XVIZTreeTableBuilder,\n  [UI_TYPES.VIDEO]: XVIZVideoBuilder\n};\n\nexport default class XVIZUIBuilder {\n  constructor(options = {}) {\n    this._validateWarn = options.validateWarn || defaultValidateWarn;\n    this._validateError = options.validateError || defaultValidateError;\n\n    this._children = [];\n\n    Object.values(UI_TYPES).map(type => {\n      // add UI builders, e.g.\n      // type `panel`\n      //  - this.panel = (props) => this._setChild('panel', props);\n      const camelType = snakeToCamel(type);\n      this[camelType] = props => {\n        return this._createUIBuilder(type, props);\n      };\n    });\n  }\n\n  getUI() {\n    return this._children.reduce((ui, child) => {\n      const childConfig = child.getUI();\n      ui[childConfig.name] = childConfig;\n      return ui;\n    }, {});\n  }\n\n  child(child) {\n    if (!(child instanceof XVIZPanelBuilder)) {\n      this._validateError('Top level UI element should be `Panel`');\n    }\n    this._children.push(child);\n    return child;\n  }\n\n  _createUIBuilder(type, props) {\n    return new UI_BUILDER_MAP[type]({\n      ...props,\n      validateWarn: this._validateWarn,\n      validateError: this._validateError,\n      root: this\n    });\n  }\n}\n"],"file":"xviz-ui-builder.js"}