{"version":3,"sources":["../../../src/float-panel/index.js"],"names":["React","PureComponent","PropTypes","Draggable","styled","withTheme","evaluateStyle","Container","div","props","theme","__reset__","position","boxSizing","boxShadow","shadow","borderStyle","borderWidth","borderColor","isMoving","isResizing","controlColorActive","backgroundAlt","userStyle","ContentComponent","overflow","lineHeight","TitleComponent","background","color","textColorInvert","textColorPrimary","textAlign","fontWeight","Resizer","width","height","right","bottom","zIndex","FloatPanel","constructor","x","y","minimized","setState","startProps","deltaX","deltaY","state","onUpdate","Math","max","hasDragged","minimizable","title","renderMover","children","movable","_onMoveStart","_onMoveDrag","_onMoveEnd","renderContent","styleProps","style","resizable","content","_onResizeStart","_onResizeDrag","_onResizeEnd","cursor","resizer","render","className","parentWidth","parentHeight","wrapperStyle","left","min","top","wrapper","string","object","number","oneOfType","element","isRequired","bool","func","Infinity"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport Draggable from '../shared/draggable';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../shared/theme';\n\nexport const Container = styled.div(props => ({\n  ...props.theme.__reset__,\n  position: 'absolute',\n  boxSizing: 'content-box',\n  boxShadow: props.theme.shadow,\n  borderStyle: 'solid',\n  borderWidth: 1,\n  borderColor:\n    props.isMoving || props.isResizing ? props.theme.controlColorActive : props.theme.backgroundAlt,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const ContentComponent = styled.div(props => ({\n  overflow: 'hidden',\n  lineHeight: 0,\n  boxSizing: 'content-box',\n  position: 'relative',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const TitleComponent = styled.div(props => ({\n  background:\n    props.isMoving || props.isResizing ? props.theme.controlColorActive : props.theme.backgroundAlt,\n  color:\n    props.isMoving || props.isResizing ? props.theme.textColorInvert : props.theme.textColorPrimary,\n  textAlign: 'center',\n  fontWeight: 'bold',\n  lineHeight: 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const Resizer = styled.div(props => ({\n  position: 'absolute',\n  width: 12,\n  height: 12,\n  right: 0,\n  bottom: 0,\n  zIndex: 1\n}));\n\n/**\n * @class\n */\nclass FloatPanel extends PureComponent {\n  static propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    // container\n    parentWidth: PropTypes.number,\n    parentHeight: PropTypes.number,\n    // state\n    title: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    minimized: PropTypes.bool,\n    // interactivity\n    movable: PropTypes.bool,\n    resizable: PropTypes.bool,\n    minimizable: PropTypes.bool,\n    // callbacks\n    onUpdate: PropTypes.func\n  };\n\n  static defaultProps = {\n    style: {},\n    parentWidth: Infinity,\n    parentHeight: Infinity,\n    className: '',\n    title: '',\n    minimized: false,\n    movable: true,\n    resizable: false,\n    minimizable: true,\n    onUpdate: () => {}\n  };\n\n  /**\n   * @constructor\n   *\n   * @property {string|Element} title content to display in the title bar.\n   *  If empty, the title bar will be hidden.\n   * @property {number} x position from the left in pixels\n   * @property {number} y position from the top in pixels\n   * @property {number} width width of the panel\n   * @property {number} height height of the panel\n   * @property {string} [className] additional class name for the container\n   * @property {number} [parentWidth] width of the parent window\n   * @property {number} [parentHeight]} height of the parent window\n   *  If parent window size is specified, the panel cannot be moved outside of its bounds.\n   * @property {boolean} [minimized] whether the panel is minimized (show only title bar)\n   * @property {boolean} [movable] whether the panel can be moved, default true\n   * @property {boolean} [resizable] whether the panel can be resized, default false\n   * @property {boolean} [minimizable] whether the panel can be minimized, default true\n   * @property {function} [onUpdate] callback when user move/resize/minimize the panel\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMoving: false,\n      isResizing: false,\n      startProps: null\n    };\n  }\n\n  _onMoveStart = () => {\n    const {x, y, width, height, minimized} = this.props;\n    this.setState({\n      isMoving: true,\n      startProps: {x, y, width, height, minimized}\n    });\n  };\n\n  _onMoveDrag = ({deltaX, deltaY}) => {\n    const {startProps} = this.state;\n    this.props.onUpdate({\n      ...startProps,\n      x: Math.max(0, startProps.x + deltaX),\n      y: Math.max(0, startProps.y + deltaY)\n    });\n  };\n\n  _onMoveEnd = ({hasDragged}) => {\n    if (this.props.minimizable && this.props.title && !hasDragged) {\n      const {startProps} = this.state;\n      this.props.onUpdate({\n        ...startProps,\n        minimized: !startProps.minimized\n      });\n    }\n    this.setState({isMoving: false});\n  };\n\n  _onResizeStart = () => {\n    const {x, y, width, height, minimized} = this.props;\n    this.setState({\n      isResizing: true,\n      startProps: {x, y, width, height, minimized}\n    });\n  };\n\n  _onResizeDrag = ({deltaX, deltaY}) => {\n    const {startProps} = this.state;\n    this.props.onUpdate({\n      ...startProps,\n      width: Math.max(0, startProps.width + deltaX),\n      height: Math.max(0, startProps.height + deltaY)\n    });\n  };\n\n  _onResizeEnd = () => {\n    this.setState({isResizing: false});\n  };\n\n  renderMover(children) {\n    const {movable} = this.props;\n\n    if (movable) {\n      return (\n        <Draggable\n          onDragStart={this._onMoveStart}\n          onDrag={this._onMoveDrag}\n          onDragEnd={this._onMoveEnd}\n        >\n          {children}\n        </Draggable>\n      );\n    }\n    return children;\n  }\n\n  renderContent(styleProps) {\n    const {style, height, minimized, minimizable, resizable} = this.props;\n\n    if (minimizable && minimized) {\n      return null;\n    }\n\n    return (\n      <ContentComponent {...styleProps} userStyle={style.content} style={{height}}>\n        {this.props.children}\n\n        {resizable && (\n          <Draggable\n            onDragStart={this._onResizeStart}\n            onDrag={this._onResizeDrag}\n            onDragEnd={this._onResizeEnd}\n            style={{cursor: 'nwse-resize'}}\n          >\n            <Resizer {...styleProps} userStyle={style.resizer} />\n          </Draggable>\n        )}\n      </ContentComponent>\n    );\n  }\n\n  render() {\n    const {\n      theme,\n      style,\n      title,\n      x,\n      y,\n      width,\n      height,\n      className,\n      parentWidth,\n      parentHeight\n    } = this.props;\n    const {isMoving, isResizing} = this.state;\n\n    const styleProps = {\n      theme,\n      isMoving,\n      isResizing\n    };\n\n    const wrapperStyle = {\n      left: Math.min(x, Math.max(0, parentWidth - width)),\n      top: Math.min(y, Math.max(0, parentHeight - height)),\n      width\n    };\n\n    // Only title bar is draggable\n    return (\n      <Container\n        className={className}\n        {...styleProps}\n        userStyle={style.wrapper}\n        style={wrapperStyle}\n      >\n        {title\n          ? this.renderMover(\n              <TitleComponent {...styleProps} userStyle={style.title}>\n                {title}\n              </TitleComponent>\n            )\n          : this.renderMover(this.renderContent(styleProps))}\n        {title && this.renderContent(styleProps)}\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(FloatPanel);\n"],"file":"index.js"}