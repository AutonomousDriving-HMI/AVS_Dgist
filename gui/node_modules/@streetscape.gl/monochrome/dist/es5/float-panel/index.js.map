{"version":3,"sources":["../../../src/float-panel/index.js"],"names":["Container","styled","div","props","theme","__reset__","position","boxSizing","boxShadow","shadow","borderStyle","borderWidth","borderColor","isMoving","isResizing","controlColorActive","backgroundAlt","userStyle","ContentComponent","overflow","lineHeight","TitleComponent","background","color","textColorInvert","textColorPrimary","textAlign","fontWeight","Resizer","width","height","right","bottom","zIndex","FloatPanel","x","y","minimized","setState","startProps","deltaX","deltaY","state","onUpdate","Math","max","hasDragged","minimizable","title","children","movable","_onMoveStart","_onMoveDrag","_onMoveEnd","styleProps","style","resizable","content","_onResizeStart","_onResizeDrag","_onResizeEnd","cursor","resizer","className","parentWidth","parentHeight","wrapperStyle","left","min","top","wrapper","renderMover","renderContent","PureComponent","PropTypes","string","object","number","oneOfType","element","isRequired","bool","func","Infinity"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport Draggable from '../shared/draggable';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../shared/theme';\n\nexport const Container = styled.div(props => ({\n  ...props.theme.__reset__,\n  position: 'absolute',\n  boxSizing: 'content-box',\n  boxShadow: props.theme.shadow,\n  borderStyle: 'solid',\n  borderWidth: 1,\n  borderColor:\n    props.isMoving || props.isResizing ? props.theme.controlColorActive : props.theme.backgroundAlt,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const ContentComponent = styled.div(props => ({\n  overflow: 'hidden',\n  lineHeight: 0,\n  boxSizing: 'content-box',\n  position: 'relative',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const TitleComponent = styled.div(props => ({\n  background:\n    props.isMoving || props.isResizing ? props.theme.controlColorActive : props.theme.backgroundAlt,\n  color:\n    props.isMoving || props.isResizing ? props.theme.textColorInvert : props.theme.textColorPrimary,\n  textAlign: 'center',\n  fontWeight: 'bold',\n  lineHeight: 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nexport const Resizer = styled.div(props => ({\n  position: 'absolute',\n  width: 12,\n  height: 12,\n  right: 0,\n  bottom: 0,\n  zIndex: 1\n}));\n\n/**\n * @class\n */\nclass FloatPanel extends PureComponent {\n  static propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    // container\n    parentWidth: PropTypes.number,\n    parentHeight: PropTypes.number,\n    // state\n    title: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    minimized: PropTypes.bool,\n    // interactivity\n    movable: PropTypes.bool,\n    resizable: PropTypes.bool,\n    minimizable: PropTypes.bool,\n    // callbacks\n    onUpdate: PropTypes.func\n  };\n\n  static defaultProps = {\n    style: {},\n    parentWidth: Infinity,\n    parentHeight: Infinity,\n    className: '',\n    title: '',\n    minimized: false,\n    movable: true,\n    resizable: false,\n    minimizable: true,\n    onUpdate: () => {}\n  };\n\n  /**\n   * @constructor\n   *\n   * @property {string|Element} title content to display in the title bar.\n   *  If empty, the title bar will be hidden.\n   * @property {number} x position from the left in pixels\n   * @property {number} y position from the top in pixels\n   * @property {number} width width of the panel\n   * @property {number} height height of the panel\n   * @property {string} [className] additional class name for the container\n   * @property {number} [parentWidth] width of the parent window\n   * @property {number} [parentHeight]} height of the parent window\n   *  If parent window size is specified, the panel cannot be moved outside of its bounds.\n   * @property {boolean} [minimized] whether the panel is minimized (show only title bar)\n   * @property {boolean} [movable] whether the panel can be moved, default true\n   * @property {boolean} [resizable] whether the panel can be resized, default false\n   * @property {boolean} [minimizable] whether the panel can be minimized, default true\n   * @property {function} [onUpdate] callback when user move/resize/minimize the panel\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMoving: false,\n      isResizing: false,\n      startProps: null\n    };\n  }\n\n  _onMoveStart = () => {\n    const {x, y, width, height, minimized} = this.props;\n    this.setState({\n      isMoving: true,\n      startProps: {x, y, width, height, minimized}\n    });\n  };\n\n  _onMoveDrag = ({deltaX, deltaY}) => {\n    const {startProps} = this.state;\n    this.props.onUpdate({\n      ...startProps,\n      x: Math.max(0, startProps.x + deltaX),\n      y: Math.max(0, startProps.y + deltaY)\n    });\n  };\n\n  _onMoveEnd = ({hasDragged}) => {\n    if (this.props.minimizable && this.props.title && !hasDragged) {\n      const {startProps} = this.state;\n      this.props.onUpdate({\n        ...startProps,\n        minimized: !startProps.minimized\n      });\n    }\n    this.setState({isMoving: false});\n  };\n\n  _onResizeStart = () => {\n    const {x, y, width, height, minimized} = this.props;\n    this.setState({\n      isResizing: true,\n      startProps: {x, y, width, height, minimized}\n    });\n  };\n\n  _onResizeDrag = ({deltaX, deltaY}) => {\n    const {startProps} = this.state;\n    this.props.onUpdate({\n      ...startProps,\n      width: Math.max(0, startProps.width + deltaX),\n      height: Math.max(0, startProps.height + deltaY)\n    });\n  };\n\n  _onResizeEnd = () => {\n    this.setState({isResizing: false});\n  };\n\n  renderMover(children) {\n    const {movable} = this.props;\n\n    if (movable) {\n      return (\n        <Draggable\n          onDragStart={this._onMoveStart}\n          onDrag={this._onMoveDrag}\n          onDragEnd={this._onMoveEnd}\n        >\n          {children}\n        </Draggable>\n      );\n    }\n    return children;\n  }\n\n  renderContent(styleProps) {\n    const {style, height, minimized, minimizable, resizable} = this.props;\n\n    if (minimizable && minimized) {\n      return null;\n    }\n\n    return (\n      <ContentComponent {...styleProps} userStyle={style.content} style={{height}}>\n        {this.props.children}\n\n        {resizable && (\n          <Draggable\n            onDragStart={this._onResizeStart}\n            onDrag={this._onResizeDrag}\n            onDragEnd={this._onResizeEnd}\n            style={{cursor: 'nwse-resize'}}\n          >\n            <Resizer {...styleProps} userStyle={style.resizer} />\n          </Draggable>\n        )}\n      </ContentComponent>\n    );\n  }\n\n  render() {\n    const {\n      theme,\n      style,\n      title,\n      x,\n      y,\n      width,\n      height,\n      className,\n      parentWidth,\n      parentHeight\n    } = this.props;\n    const {isMoving, isResizing} = this.state;\n\n    const styleProps = {\n      theme,\n      isMoving,\n      isResizing\n    };\n\n    const wrapperStyle = {\n      left: Math.min(x, Math.max(0, parentWidth - width)),\n      top: Math.min(y, Math.max(0, parentHeight - height)),\n      width\n    };\n\n    // Only title bar is draggable\n    return (\n      <Container\n        className={className}\n        {...styleProps}\n        userStyle={style.wrapper}\n        style={wrapperStyle}\n      >\n        {title\n          ? this.renderMover(\n              <TitleComponent {...styleProps} userStyle={style.title}>\n                {title}\n              </TitleComponent>\n            )\n          : this.renderMover(this.renderContent(styleProps))}\n        {title && this.renderContent(styleProps)}\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(FloatPanel);\n"],"file":"index.js"}